-- Create users table
CREATE TABLE IF NOT EXISTS users (
  id SERIAL PRIMARY KEY,
  username VARCHAR(255) NOT NULL DEFAULT '',
  pluginlab_id VARCHAR(255) NOT NULL DEFAULT '',
  language VARCHAR(255) NOT NULL DEFAULT 'English'
);

-- Create referrals table
CREATE TABLE referrals (
  id SERIAL PRIMARY KEY,
  referrer_id INT NOT NULL,
  referred_id INT NOT NULL,
  referral_date TIMESTAMP DEFAULT NOW(),
  FOREIGN KEY (referrer_id) REFERENCES users(id),
  FOREIGN KEY (referred_id) REFERENCES users(id)
);

-- Create user_referral_count table
CREATE TABLE user_referral_count (
  user_id INT PRIMARY KEY,
  referral_count INT DEFAULT 0,
  FOREIGN KEY (user_id) REFERENCES users(id)
);

-- alter table
ALTER TABLE users
ADD COLUMN first_name VARCHAR(255) NOT NULL DEFAULT '',
ADD COLUMN last_name VARCHAR(255) NOT NULL DEFAULT '';